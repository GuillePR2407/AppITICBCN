{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport * as React from 'react';\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport { useFocusEffect } from '@react-navigation/native';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar UsersSection = function UsersSection() {\n  var _React$useState = React.useState([]),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    users = _React$useState2[0],\n    setUsers = _React$useState2[1];\n  var _React$useState3 = React.useState(true),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    loading = _React$useState4[0],\n    setLoading = _React$useState4[1];\n  var fetchUsers = function () {\n    var _ref = _asyncToGenerator(function* () {\n      setLoading(true);\n      try {\n        var data = yield getAllUsers();\n        setUsers(data);\n      } catch (error) {\n        console.error('Failed to fetch users:', error);\n      } finally {\n        setLoading(false);\n      }\n    });\n    return function fetchUsers() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  useFocusEffect(React.useCallback(function () {\n    fetchUsers();\n  }, []));\n  if (loading) {\n    return _jsx(View, {\n      style: {\n        flex: 1,\n        justifyContent: 'center',\n        alignItems: 'center'\n      },\n      children: _jsx(Text, {\n        children: \"Cargando usuarios...\"\n      })\n    });\n  }\n  return _jsx(ScrollView, {\n    style: {\n      padding: 20\n    },\n    children: users.map(function (user, index) {\n      return _jsxs(View, {\n        style: {\n          marginBottom: 20\n        },\n        children: [_jsxs(Text, {\n          children: [\"Username: \", user.username]\n        }), _jsxs(Text, {\n          children: [\"Email: \", user.email]\n        }), _jsxs(Text, {\n          children: [\"Role: \", user.role.name]\n        })]\n      }, index);\n    })\n  });\n};\nexport default UsersSection;","map":{"version":3,"names":["React","ScrollView","View","Text","useFocusEffect","jsx","_jsx","jsxs","_jsxs","UsersSection","_React$useState","useState","_React$useState2","_slicedToArray","users","setUsers","_React$useState3","_React$useState4","loading","setLoading","fetchUsers","_ref","_asyncToGenerator","data","getAllUsers","error","console","apply","arguments","useCallback","style","flex","justifyContent","alignItems","children","padding","map","user","index","marginBottom","username","email","role","name"],"sources":["C:/Users/kikoj/Desktop/DAM/Projecte/AppITICBCN/M13_PROJECTE2/APPITICBCN/src/Sections/UsersSection.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport { ScrollView, View, Text } from 'react-native';\r\nimport { useFocusEffect } from '@react-navigation/native'; // Usar useFocusEffect si necesitas recargar los datos cada vez que se visite la pantalla\r\n\r\nconst UsersSection = () => {\r\n    const [users, setUsers] = React.useState([]);\r\n    const [loading, setLoading] = React.useState(true); // Estado para manejar la carga de datos\r\n\r\n    const fetchUsers = async () => {\r\n        setLoading(true);\r\n        try {\r\n            const data = await getAllUsers(); // Obtener los datos de los usuarios\r\n            setUsers(data); // Actualizar el estado con los nuevos usuarios\r\n        } catch (error) {\r\n            console.error('Failed to fetch users:', error); // Gestionar errores si la peticiÃ³n falla\r\n        } finally {\r\n            setLoading(false); // Finalizar la carga independientemente del resultado\r\n        }\r\n    };\r\n\r\n    useFocusEffect(\r\n        React.useCallback(() => {\r\n            fetchUsers(); // Llamar a fetchUsers cuando el componente gane foco\r\n        }, [])\r\n    );\r\n\r\n    if (loading) {\r\n        return (\r\n            <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\r\n                <Text>Cargando usuarios...</Text>\r\n            </View>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <ScrollView style={{ padding: 20 }}>\r\n            {users.map((user, index) => (\r\n                <View key={index} style={{ marginBottom: 20 }}>\r\n                    <Text>Username: {user.username}</Text>\r\n                    <Text>Email: {user.email}</Text>\r\n                    <Text>Role: {user.role.name}</Text>\r\n                </View>\r\n            ))}\r\n        </ScrollView>\r\n    );\r\n};\r\n\r\nexport default UsersSection;\r\n"],"mappings":";;AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAAC,OAAAC,UAAA;AAAA,OAAAC,IAAA;AAAA,OAAAC,IAAA;AAE/B,SAASC,cAAc,QAAQ,0BAA0B;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAE1D,IAAMC,YAAY,GAAG,SAAfA,YAAYA,CAAA,EAAS;EACvB,IAAAC,eAAA,GAA0BV,KAAK,CAACW,QAAQ,CAAC,EAAE,CAAC;IAAAC,gBAAA,GAAAC,cAAA,CAAAH,eAAA;IAArCI,KAAK,GAAAF,gBAAA;IAAEG,QAAQ,GAAAH,gBAAA;EACtB,IAAAI,gBAAA,GAA8BhB,KAAK,CAACW,QAAQ,CAAC,IAAI,CAAC;IAAAM,gBAAA,GAAAJ,cAAA,CAAAG,gBAAA;IAA3CE,OAAO,GAAAD,gBAAA;IAAEE,UAAU,GAAAF,gBAAA;EAE1B,IAAMG,UAAU;IAAA,IAAAC,IAAA,GAAAC,iBAAA,CAAG,aAAY;MAC3BH,UAAU,CAAC,IAAI,CAAC;MAChB,IAAI;QACA,IAAMI,IAAI,SAASC,WAAW,CAAC,CAAC;QAChCT,QAAQ,CAACQ,IAAI,CAAC;MAClB,CAAC,CAAC,OAAOE,KAAK,EAAE;QACZC,OAAO,CAACD,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;MAClD,CAAC,SAAS;QACNN,UAAU,CAAC,KAAK,CAAC;MACrB;IACJ,CAAC;IAAA,gBAVKC,UAAUA,CAAA;MAAA,OAAAC,IAAA,CAAAM,KAAA,OAAAC,SAAA;IAAA;EAAA,GAUf;EAEDxB,cAAc,CACVJ,KAAK,CAAC6B,WAAW,CAAC,YAAM;IACpBT,UAAU,CAAC,CAAC;EAChB,CAAC,EAAE,EAAE,CACT,CAAC;EAED,IAAIF,OAAO,EAAE;IACT,OACIZ,IAAA,CAACJ,IAAI;MAAC4B,KAAK,EAAE;QAAEC,IAAI,EAAE,CAAC;QAAEC,cAAc,EAAE,QAAQ;QAAEC,UAAU,EAAE;MAAS,CAAE;MAAAC,QAAA,EACrE5B,IAAA,CAACH,IAAI;QAAA+B,QAAA,EAAC;MAAoB,CAAM;IAAC,CAC/B,CAAC;EAEf;EAEA,OACI5B,IAAA,CAACL,UAAU;IAAC6B,KAAK,EAAE;MAAEK,OAAO,EAAE;IAAG,CAAE;IAAAD,QAAA,EAC9BpB,KAAK,CAACsB,GAAG,CAAC,UAACC,IAAI,EAAEC,KAAK;MAAA,OACnB9B,KAAA,CAACN,IAAI;QAAa4B,KAAK,EAAE;UAAES,YAAY,EAAE;QAAG,CAAE;QAAAL,QAAA,GAC1C1B,KAAA,CAACL,IAAI;UAAA+B,QAAA,GAAC,YAAU,EAACG,IAAI,CAACG,QAAQ;QAAA,CAAO,CAAC,EACtChC,KAAA,CAACL,IAAI;UAAA+B,QAAA,GAAC,SAAO,EAACG,IAAI,CAACI,KAAK;QAAA,CAAO,CAAC,EAChCjC,KAAA,CAACL,IAAI;UAAA+B,QAAA,GAAC,QAAM,EAACG,IAAI,CAACK,IAAI,CAACC,IAAI;QAAA,CAAO,CAAC;MAAA,GAH5BL,KAIL,CAAC;IAAA,CACV;EAAC,CACM,CAAC;AAErB,CAAC;AAED,eAAe7B,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}