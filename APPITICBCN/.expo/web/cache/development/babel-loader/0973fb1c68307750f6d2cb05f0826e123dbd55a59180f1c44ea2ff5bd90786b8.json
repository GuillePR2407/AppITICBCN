{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport axios from 'axios';\nimport CookieManager from 'react-native-cookies';\nvar API_URL = 'http://localhost:8082/api';\nexport var loginUser = function () {\n  var _ref = _asyncToGenerator(function* (email, password) {\n    try {\n      var response = yield axios.post(`${API_URL}/auth/signin`, {\n        email: email,\n        password: password\n      });\n      console.log('Login successful:', response.data);\n      var cookies = yield CookieManager.get(API_URL);\n      console.log('Cookies:', cookies);\n      var jwtToken = cookies.jwtToken.value;\n      console.log('JWT Token:', jwtToken);\n    } catch (error) {\n      console.error('Login Error:', error);\n    }\n  });\n  return function loginUser(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar secureCall = function () {\n  var _ref2 = _asyncToGenerator(function* () {\n    try {\n      var jwtToken = yield getJwtToken();\n      var response = yield axios.get(`${API_URL}/some-secure-endpoint`, {\n        headers: {\n          'Authorization': `Bearer ${jwtToken}`\n        }\n      });\n      console.log('Secure call response:', response.data);\n    } catch (error) {\n      console.error('Error making secure call:', error);\n    }\n  });\n  return function secureCall() {\n    return _ref2.apply(this, arguments);\n  };\n}();","map":{"version":3,"names":["axios","CookieManager","API_URL","loginUser","_ref","_asyncToGenerator","email","password","response","post","console","log","data","cookies","get","jwtToken","value","error","_x","_x2","apply","arguments","secureCall","_ref2","getJwtToken","headers"],"sources":["C:/Users/kikoj/Desktop/DAM/Projecte/AppITICBCN/M13_PROJECTE2/APPITICBCN/src/services/authService.tsx"],"sourcesContent":["// AuthService.ts\r\nimport axios from 'axios';\r\nimport CookieManager from 'react-native-cookies';\r\n\r\nconst API_URL = 'http://localhost:8082/api';\r\n\r\nexport const loginUser = async (email: string, password: string): Promise<void> => {\r\n    try {\r\n        // Hacer el POST para iniciar sesión\r\n        const response = await axios.post(`${API_URL}/auth/signin`, {\r\n        email,\r\n        password,\r\n        });\r\n\r\n        // Tras iniciar sesión, las cookies son manejadas automáticamente por el navegador,\r\n        // pero en React Native necesitas gestionarlas manualmente.\r\n        console.log('Login successful:', response.data);\r\n\r\n        // Aquí puedes acceder a las cookies si necesitas procesar algo específico\r\n        const cookies = await CookieManager.get(API_URL);\r\n        console.log('Cookies:', cookies);\r\n\r\n        // Suponiendo que la cookie del JWT se llama 'jwtToken'\r\n        const jwtToken = cookies.jwtToken.value;\r\n        console.log('JWT Token:', jwtToken);\r\n\r\n        // Guardar el JWT en algún lugar seguro, si es necesario.\r\n        // AsyncStorage, por ejemplo, aunque con cookies normalmente no es necesario.\r\n\r\n    } catch (error) {\r\n        console.error('Login Error:', error);\r\n    }\r\n}\r\n\r\nconst secureCall = async () => {\r\n    try {\r\n        // Suponiendo que ya tienes el JWT en una variable `jwtToken`\r\n        const jwtToken = await getJwtToken(); // Implementa esta función para obtener el JWT de donde lo guardaste.\r\n    \r\n        const response = await axios.get(`${API_URL}/some-secure-endpoint`, {\r\n            headers: {\r\n            'Authorization': `Bearer ${jwtToken}`\r\n            }\r\n        });\r\n    \r\n        console.log('Secure call response:', response.data);\r\n    } catch (error) {\r\n        console.error('Error making secure call:', error);\r\n    }\r\n}\r\n"],"mappings":";AACA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,aAAa,MAAM,sBAAsB;AAEhD,IAAMC,OAAO,GAAG,2BAA2B;AAE3C,OAAO,IAAMC,SAAS;EAAA,IAAAC,IAAA,GAAAC,iBAAA,CAAG,WAAOC,KAAa,EAAEC,QAAgB,EAAoB;IAC/E,IAAI;MAEA,IAAMC,QAAQ,SAASR,KAAK,CAACS,IAAI,CAAE,GAAEP,OAAQ,cAAa,EAAE;QAC5DI,KAAK,EAALA,KAAK;QACLC,QAAQ,EAARA;MACA,CAAC,CAAC;MAIFG,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAEH,QAAQ,CAACI,IAAI,CAAC;MAG/C,IAAMC,OAAO,SAASZ,aAAa,CAACa,GAAG,CAACZ,OAAO,CAAC;MAChDQ,OAAO,CAACC,GAAG,CAAC,UAAU,EAAEE,OAAO,CAAC;MAGhC,IAAME,QAAQ,GAAGF,OAAO,CAACE,QAAQ,CAACC,KAAK;MACvCN,OAAO,CAACC,GAAG,CAAC,YAAY,EAAEI,QAAQ,CAAC;IAKvC,CAAC,CAAC,OAAOE,KAAK,EAAE;MACZP,OAAO,CAACO,KAAK,CAAC,cAAc,EAAEA,KAAK,CAAC;IACxC;EACJ,CAAC;EAAA,gBA1BYd,SAASA,CAAAe,EAAA,EAAAC,GAAA;IAAA,OAAAf,IAAA,CAAAgB,KAAA,OAAAC,SAAA;EAAA;AAAA,GA0BrB;AAED,IAAMC,UAAU;EAAA,IAAAC,KAAA,GAAAlB,iBAAA,CAAG,aAAY;IAC3B,IAAI;MAEA,IAAMU,QAAQ,SAASS,WAAW,CAAC,CAAC;MAEpC,IAAMhB,QAAQ,SAASR,KAAK,CAACc,GAAG,CAAE,GAAEZ,OAAQ,uBAAsB,EAAE;QAChEuB,OAAO,EAAE;UACT,eAAe,EAAG,UAASV,QAAS;QACpC;MACJ,CAAC,CAAC;MAEFL,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAEH,QAAQ,CAACI,IAAI,CAAC;IACvD,CAAC,CAAC,OAAOK,KAAK,EAAE;MACZP,OAAO,CAACO,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;IACrD;EACJ,CAAC;EAAA,gBAfKK,UAAUA,CAAA;IAAA,OAAAC,KAAA,CAAAH,KAAA,OAAAC,SAAA;EAAA;AAAA,GAef","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}